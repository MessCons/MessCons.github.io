<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Prueba1</title>
</head>
<body>
  <h1>My Prueba</h1>

  <canvas id="chart"></canvas>

  <script src="https://www.gstatic.com/firebasejs/7.20.0/firebase.js"></script>
  <script>
    // Importa la API de Firebase
    import firebase from "firebase";

    // Inicializa la aplicaci칩n de Firebase
    const app = firebase.initializeApp({
		apiKey: "AIzaSyAsj7V0ecc2HO-p6OpOYyGCD2eHry1tg7c",
		authDomain: "meassconsorcio.firebaseapp.com",
		projectId: "meassconsorcio",
		storageBucket: "meassconsorcio.appspot.com",
		messagingSenderId: "1076354538339",
		appId: "1:1076354538339:web:2fe4aee94695849f8a1156"
    });

   // Crea una colecci칩n en Firestore
    const collection = firebase.firestore().collection("data");

    // Obtiene los datos de la colecci칩n
    const dataRef = collection.onSnapshot(snapshot => {
      // Actualiza el gr치fico con los datos recibidos
      const ctx = document.getElementById("chart").getContext("2d");
      const data = snapshot.docs.map(doc => doc.data());
      const chart = new Chart(ctx, {
        type: "line",
        data: {
          labels: data.map(d => d.timestamp),
          datasets: [{
            data: data.map(d => d.value),
            label: "Datos recibidos",
            borderColor: "red",
            backgroundColor: "rgba(255,0,0,0.2)",
          }],
        },
      });
    });
  </script>
</body>
</html>